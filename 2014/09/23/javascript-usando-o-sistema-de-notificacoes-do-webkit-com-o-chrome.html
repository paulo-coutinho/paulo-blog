<!DOCTYPE html>
<html lang="pt-br">
<head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <meta name="description" content="Olá pessoal, Não sei se já perceberam, mas no Gmail existe um recurso de notificações, que só funciona no Google Chrome. Essas notificações aparecem quando você recebe um novo email, por exemplo....">
        <meta name="keywords" content="browser, notificação, notification, web, webkit">

        <meta name="author" content="Paulo Coutinho">
        <meta name="robots" content="index,follow">

        <title>Javascript - Usando o sistema de notificações do WebKit com o Chrome - Paulo Coutinho</title>


                <meta property="og:title" content="Javascript - Usando o sistema de notificações do WebKit com o Chrome"/>
                <meta property="twitter:title" content="Javascript - Usando o sistema de notificações do WebKit com o Chrome"/>
                <meta property="og:type" content="article"/>
                <meta property="twitter:card" content="summary"/>
                <meta property="og:image" content="https://paulocoutinho.com/images/opengraph.png"/>
                <meta property="twitter:image" content="https://paulocoutinho.com/images/opengraph.png"/>
                <meta property="og:url" content="https://paulocoutinho.com/2014/09/23/javascript-usando-o-sistema-de-notificacoes-do-webkit-com-o-chrome.html"/>
                <meta property="og:description" content="Olá pessoal, Não sei se já perceberam, mas no Gmail existe um recurso de notificações, que só funciona no Google Chrome. Essas notificações aparecem quando você recebe um novo email, por exemplo. Estas notificações não foram inventadas exclusivamente para o Google Chrome, na verdade é um padrão W3C que está …"/>
                <meta property="twitter:description" content="Olá pessoal, Não sei se já perceberam, mas no Gmail existe um recurso de notificações, que só funciona no Google Chrome. Essas notificações aparecem quando você recebe um novo email, por exemplo. Estas notificações não foram inventadas exclusivamente para o Google Chrome, na verdade é um padrão W3C que está …"/>
                <meta property="og:locale" content="pt_BR"/>
                <meta property="og:site_name" content="Paulo Coutinho"/>
                <meta property="twitter:site" content="Paulo Coutinho"/>
                <meta property="article:published_time" content="2014-09-23"/>
                <meta property="og:see_also" content="https://paulocoutinho.com/2016/03/04/google-apps-scripts-ferramenta-do-google-para-integracao-entre-seus-apps-automatizacao-de-tarefas-e-aplicacoes-na-loja-do-google-chrome.html"/>
                <meta property="og:see_also" content="https://paulocoutinho.com/2014/10/14/php-yii-framework-2-0.html"/>
                <meta property="og:see_also" content="https://paulocoutinho.com/2014/09/15/php-usar-aspas-simples-ou-duplas-para-criar-uma-string.html"/>
                <meta property="article:section" content="Javascript"/>
                <meta property="article:tag" content="browser"/>
                <meta property="article:tag" content="notificação"/>
                <meta property="article:tag" content="notification"/>
                <meta property="article:tag" content="web"/>
                <meta property="article:tag" content="webkit"/>




        <link rel="icon" href="https://paulocoutinho.com/favicon.ico">
        <link rel="apple-touch-icon" sizes="180x180" href="https://paulocoutinho.com/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="https://paulocoutinho.com/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="https://paulocoutinho.com/favicon-16x16.png">
        <link rel="manifest" href="https://paulocoutinho.com/site.webmanifest">

            
            <!-- Canonical -->
            <link rel="canonical" href="https://paulocoutinho.com/2014/09/23/javascript-usando-o-sistema-de-notificacoes-do-webkit-com-o-chrome.html">
            <!-- /Canonical -->
            

        <!-- Stylesheets -->
            <link href="https://paulocoutinho.com/theme/css/all.min.css" rel="stylesheet">
        <!-- /Stylesheets -->

        <!-- RSS Feeds -->
            <link href="https://paulocoutinho.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
                  title="Paulo Coutinho Full Atom Feed"/>
            <link href="https://paulocoutinho.com/feed/rss.xml" type="application/rss+xml" rel="alternate"
                  title="Paulo Coutinho Full RSS Feed"/>
        <!-- /RSS Feeds -->

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->

            <!-- Google Analytics -->
            <script>
                (function (i, s, o, g, r, a, m) {
                    i['GoogleAnalyticsObject'] = r;
                    i[r] = i[r] || function () {
                        (i[r].q = i[r].q || []).push(arguments)
                    }, i[r].l = 1 * new Date();
                    a = s.createElement(o),
                        m = s.getElementsByTagName(o)[0];
                    a.async = 1;
                    a.src = g;
                    m.parentNode.insertBefore(a, m)
                })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

                ga('create', 'UA-160006583-1', 'auto');
                ga('send', 'pageview');
            </script>
            <!-- /Google Analytics -->


</head>

<body>

<!-- Header -->
    <div class="header-container gradient">

<!-- Static navbar -->
<div class="container">
    <div class="header-nav">
        <div class="header-logo">
            <a class="pull-left" href="https://paulocoutinho.com/"><img class="mr20"
                                                            src="https://paulocoutinho.com/images/logo.png"
                                                            alt="logo">Paulo Coutinho</a>
        </div>
        <div class="nav pull-right">
                    <a href="https://paulocoutinho.com/">Home</a>
                    <a href="https://paulocoutinho.com/categories.html">Categorias</a>
                    <a href="https://paulocoutinho.com/tags.html">Tags</a>
                    <a                                            href="https://paulocoutinho.com/pages/meu-perfil.html">Meu Perfil</a>
                    <a                                            href="https://paulocoutinho.com/pages/projetos.html">Projetos</a>
        </div>
    </div>
</div>
<!-- /Static navbar -->

<!-- Header -->
    <!-- Header -->
    <div class="container header-wrapper">
        <div class="row">
              <div class="col-lg-12">
                  <div class="header-content">
                      <h1 class="header-title">Javascript - Usando o sistema de notificações do WebKit com o Chrome</h1>
                      <p class="header-date">Por <a href="https://paulocoutinho.com/author/paulo.html">paulo</a>, Ter 23 Setembro 2014, na categoria <a href="https://paulocoutinho.com/category/javascript.html">Javascript</a></p>
                      <div class="header-underline"></div>
                      <div class="clearfix"></div>
                      <p class="pull-right header-tags">
                          <span class="glyphicon glyphicon-tags mr5" aria-hidden="true"></span>
<a href="https://paulocoutinho.com/tag/browser.html">browser</a>, <a href="https://paulocoutinho.com/tag/notificacao.html">notificação</a>, <a href="https://paulocoutinho.com/tag/notification.html">notification</a>, <a href="https://paulocoutinho.com/tag/web.html">web</a>, <a href="https://paulocoutinho.com/tag/webkit.html">webkit</a>                      </p>
                  </div>
              </div>
        </div>
    </div>
    <!-- /Header -->
<!-- /Header -->

</div>
<!-- /Header -->


<!-- Content -->
    <div class="container content">
        <p>Olá pessoal,</p>
<p>Não sei se já perceberam, mas no Gmail existe um recurso de notificações, que só funciona no Google Chrome.</p>
<p>Essas notificações aparecem quando você recebe um novo email, por exemplo.</p>
<p>Estas notificações não foram inventadas exclusivamente para o Google Chrome, na verdade é um padrão W3C que está sendo implementado aos poucos nos navegadores, mas somente no Chrome já está funcionando.</p>
<p>Referência: <a href="http://dev.w3.org/2006/webapi/WebNotifications/publish/Notifications.html">http://dev.w3.org/2006/webapi/WebNotifications/publish/Notifications.html</a></p>
<p>Mas como podemos usufruir deste recurso em nossos websites?</p>
<p>É bem simples, usando obviamente os novos recursos do Javascript, temos acesso a todas essas APIs. Os passos básicos para implementar são:</p>
<blockquote>
<p>1 - Verificar se o navegador tem suporte</p>
<p>2 - Pedir permissão para exibir notificações</p>
<p>3 - Exibir as notificações</p>
</blockquote>
<p>Vamos ao que interessa, o código:</p>
<div class="highlight"><pre><span></span><code><span class="k">function</span><span class="w"> </span><span class="nf">verificarSuporte</span><span class="p">()</span><span class="w"></span>
<span class="p">{</span>
<span class="n">    var </span><span class="s">c = ( window.webkitNotifications !== undefined )</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span>!<span class="n">c</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">alert</span><span class="p">(</span><span class="s">&quot;Seu navegador não suporta notificações desktop. Por favor, use o Google Chrome!&quot;</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">    return </span><span class="s">c</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>


<p>Esta função é a que verifica se o seu navegador tem suporte a notificações desktop ou não. Se o navegador não suportar, a função exibe um alert.</p>
<div class="highlight"><pre><span></span><code><span class="k">function</span><span class="w"> </span><span class="nf">verificarPermissao</span><span class="p">()</span><span class="w"></span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> !<span class="n">verificarSuporte</span><span class="p">()</span> <span class="p">)</span> <span class="k">return</span><span class="p">;</span>

    <span class="k">switch</span> <span class="p">(</span> <span class="n">webkitNotifications</span><span class="p">.</span><span class="n">checkPermission</span><span class="p">()</span> <span class="p">)</span>
    <span class="p">{</span>
<span class="n">        case </span><span class="s">0: // PERMITIDO</span><span class="p"></span>
        <span class="n">alert</span><span class="p">(</span> <span class="s">&quot;Permitido&quot;</span> <span class="p">);</span>
        <span class="k">break</span><span class="p">;</span><span class="n"></span>

<span class="n">        case </span><span class="s">1: // NÃO PERMITIDO</span><span class="p"></span>
        <span class="n">alert</span><span class="p">(</span><span class="s">&quot;Não permitido&quot;</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span><span class="n"></span>

<span class="n">        case </span><span class="s">2: // PERMISSÃO NEGADA</span><span class="p"></span>
        <span class="n">alert</span><span class="p">(</span> <span class="s">&quot;Permissão negada&quot;</span> <span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>


<p>Esta função é a que verifica a permissão de exibir as notificações que seu navegador definiu para a sua página. Para cada caso de permissão, é exibido um alert com a descrição.</p>
<div class="highlight"><pre><span></span><code><span class="k">function</span><span class="w"> </span><span class="nf">solicitarPermissao</span><span class="p">()</span><span class="w"></span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span>!<span class="n">verificarSuporte</span><span class="p">())</span> <span class="k">return</span><span class="p">;</span>
    <span class="n">webkitNotifications</span><span class="p">.</span><span class="n">requestPermission</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>


<p>Esta função que solicita ao navegador a permissão de exibir as notificações. Assim que ela é chamada, o navegador exibe uma caixa de confirmação.</p>
<div class="highlight"><pre><span></span><code><span class="k">function</span><span class="w"> </span><span class="nf">testeDeNotificacao</span><span class="p">()</span><span class="w"></span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> !<span class="n">verificarSuporte</span><span class="p">()</span> <span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="n">webkitNotifications</span><span class="p">.</span><span class="n">checkPermission</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span>
    <span class="p">{</span>
<span class="n">        var </span><span class="s">icone = &quot;http://www.prsolucoes.com/downloads/logo_notificacao.png&quot;</span><span class="p">;</span>
<span class="n">        var </span><span class="s">titulo = &quot;Mensagem de PRSoluções&quot;</span><span class="p">;</span>
<span class="n">        var </span><span class="s">subTitulo = &quot;Eu irei desaparecer em 10 segundos!&quot;</span><span class="p">;</span>
<span class="n">        var </span><span class="s">notificacao = webkitNotifications.createNotification( icone, titulo, subTitulo )</span><span class="p">;</span>

        <span class="n">notificacao</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>

        <span class="n">setTimeout</span><span class="p">(</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span> <span class="n">notificacao</span><span class="p">.</span><span class="n">cancel</span><span class="p">()</span> <span class="p">},</span> <span class="mi">10000</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="n">    else</span>
<span class="n">    </span><span class="s">{</span><span class="p"></span>
        <span class="n">alert</span><span class="p">(</span> <span class="s">&quot;Por favor, solicite permissão primeiro.&quot;</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>


<p>Esta função exibe a notificação em si. É bem simples, basta passar a url do icone, o título e o subtítulo.</p>
<p>Obrigado pessoal e até o próximo post.</p>

            <h4>Outros conteúdos relacionados</h4>
            <dl class="dl-horizontal">
                <dt>Sex 04 Março 2016</dt>
                <dd><a href="https://paulocoutinho.com/2016/03/04/google-apps-scripts-ferramenta-do-google-para-integracao-entre-seus-apps-automatizacao-de-tarefas-e-aplicacoes-na-loja-do-google-chrome.html">Google Apps Scripts - Ferramenta do Google para integração entre seus apps, automatização de tarefas e aplicações na loja do Google Chrome</a></dd>
                <dt>Ter 14 Outubro 2014</dt>
                <dd><a href="https://paulocoutinho.com/2014/10/14/php-yii-framework-2-0.html">PHP - Yii Framework 2.0</a></dd>
                <dt>Seg 15 Setembro 2014</dt>
                <dd><a href="https://paulocoutinho.com/2014/09/15/php-usar-aspas-simples-ou-duplas-para-criar-uma-string.html">PHP - Usar aspas simples ou duplas para criar uma String?</a></dd>
            </dl>

    <div class="comments">
        <div id="disqus_thread"></div>
            <script type="text/javascript">
                var disqus_shortname = 'paulo-coutinho';
                var disqus_identifier = '2014/09/23/javascript-usando-o-sistema-de-notificacoes-do-webkit-com-o-chrome.html';
                var disqus_url = 'https://paulocoutinho.com/2014/09/23/javascript-usando-o-sistema-de-notificacoes-do-webkit-com-o-chrome.html';
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
        <noscript>Please enable JavaScript to view the comments.</noscript>
    </div>
        
    </div>
<!-- /Content -->

<!-- Footer -->
<div class="footer gradient-2">
    <div class="container footer-container ">
        <div class="row">
            <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
                <div class="footer-title">Mapa do site</div>
                <ul class="list-unstyled">
                        <li><a href="https://paulocoutinho.com/archives.html">Arquivos</a></li>
                        <li><a href="https://paulocoutinho.com/tags.html">Tags</a></li>
                        <li><a href="https://paulocoutinho.com/authors.html">Autores</a></li>
                        <li><a href="https://paulocoutinho.com/feeds/all.atom.xml" type="application/atom+xml"
                               rel="alternate">Atom Feed</a></li>
                        <li><a href="https://paulocoutinho.com/feed/rss.xml" type="application/rss+xml"
                               rel="alternate">RSS Feed</a></li>
                </ul>
            </div>
            <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
                    <div class="footer-title">Redes sociais</div>
                    <ul class="list-unstyled">
                            <li><a href="https://www.youtube.com/channel/UC9rytHKniMbIxvIr6CpX6Ow" target="_blank">YouTube</a></li>
                            <li><a href="https://twitter.com/prsolucoes" target="_blank">Twitter</a></li>
                    </ul>
            </div>
            <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
                    <div class="footer-title">Links</div>
                    <ul class="list-unstyled">
                            <li><a href="https://prsolucoes.com/" target="_blank">PRSoluções</a></li>
                    </ul>
            </div>
            <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">
                <div class="footer-title">Copyright</div>
                <p>
                    <small>&copy; Paulo Coutinho 2020</small>
                </p>
            </div>
        </div>
    </div>
</div>
<!-- /Footer -->
</body>
</html>